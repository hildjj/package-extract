# package-extract

Let's say you would like to extract multiple values from your `package.json`
file into an ES6 module that you can easily import.  You might want access to
the version, the package name, the homepage URL, etc.

You could use `import.meta.url` to find the file, read it, JSON parse it, and
extract the needed bits.  Now you'd like to use your code from the web, and
all of that falls apart.  Not only do you have to bundle the whole
`package.json` file, exposing information that you might not want to make
available to web users, but you also have to figure out how to get the
readFile bits to do the right thing.

Instead, use package-extract.

## Install

```sh
npm install -D package-extract
```

## Run

```sh
npx package-extract -o lib/package.js name version homepage
```

Note that you can extract fields that have structure, like `scripts`.

## Use

```js
import {name, version, homepage} from './package.js'
```

## Example output

```js
// Generated by package-extract v0.0.0
// Do not modify by hand.

export const name = 'package-extract'
export const version = '0.0.0'
export const homepage = 'https://github.com/hildjj/package-extract'
```

## Command line options

```text
Usage: package-extract [options] [fields...]

Arguments:
  fields                   fields to extract from package file (default:
                           ["version"])

Options:
  -d, --double             use double quotes
  -i, --indent <number>    number of spaces to indent. -1 for tab. 0 for no
                           newlines. (default: 2)
  -o, --output <filename>  name of output file, relative to package.json.  Use
                           "-" for stdout. (default: "package.js")
  -p, --package            package file to extract from, found from cwd,
                           searching up
  -s, --semi               add semicolons to the end of each variable
  --startDir <dir>         start looking from this directory, toward the root
                           (default: process.cwd())
  -t, --trailing           Add trailing commas
  -V, --version            output the version number
  -h, --help               display help for command
```

## API

```js
import {packageExtract} from 'package-extract'

// All options are optional, have the same defaults as the CLI.
await packageExtract({
  double: false,
  indent: 2,
  output: 'package.js',
  package: 'package.json',
  semi: false,
  startDir: process.cwd(),
  trailing: false
}, ['version', 'name'])
```

## Other tools

Why not use?

- [genversion](https://github.com/axelpale/genversion): Doesn't extract fields
  other than version.
- [package-json-versionify](https://github.com/nolanlawson/package-json-versionify):
  Doesn't extract fields other than version, only works in a browserify setup.
  Doesn't support ES6.
- [browserify-versionify](https://github.com/webpro/versionify): Doesn't
  extract fields other than version, only works in a browserify setup.

[![Tests](https://github.com/hildjj/package-extract/actions/workflows/node.js.yml/badge.svg)](https://github.com/hildjj/package-extract/actions/workflows/node.js.yml)
[![codecov](https://codecov.io/gh/hildjj/package-extract/branch/main/graph/badge.svg?token=KS07IJA51Z)](https://codecov.io/gh/hildjj/package-extract)
